
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Water Quality, Perception and Knowledge in China: Data Analysis (condensed) &#8212; Water Quality, Perception and Knowledge in China</title>
    
  <link rel="stylesheet" href="_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Water Quality, Perception and Knowledge in China" href="thesis_analysis.html" />
    <link rel="prev" title="Discussion" href="8_discussions.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Water Quality, Perception and Knowledge in China</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="1_introduction.html">
   Introduction
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="2_background.html">
   Background
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_literature-review.html">
   Literature Review
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4_research-questions.html">
   Research Questions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_significance.html">
   Significance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_methodology.html">
   Methodology
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_methodology.html#notes">
   Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7_analysis.html">
   Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8_discussions.html">
   Discussion
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Water Quality, Perception and Knowledge in China:
   <em>
    Data Analysis (condensed)
   </em>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="thesis_analysis.html">
   Water Quality, Perception and Knowledge in China
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/thesis_analysis_pure.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/thesis_analysis_pure.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#research-questions-and-hypotheses">
   Research Questions and Hypotheses
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#core-analyzed-data">
   Core Analyzed Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-data">
   Load Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#merge-data-into-one-dataframe">
   Merge data into one dataframe
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-hypotheses-descriptive-analysis">
   Testing Hypotheses (Descriptive Analysis)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#h1-worse-local-provincial-water-quality-score-increases-relates-to-an-increased-perception-of-severity-of-water-quality-issues-l14d-decreases">
     H1 - Worse local (provincial) water quality (
     <code class="docutils literal notranslate">
      <span class="pre">
       score
      </span>
     </code>
     increases) relates to an increased perception of severity of water quality issues (
     <code class="docutils literal notranslate">
      <span class="pre">
       l14d
      </span>
     </code>
     decreases).
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#initial-findings">
       Initial findings:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#h2-an-increase-knowledge-of-water-quality-issues-l2409-relates-to-an-increased-perception-of-severity-l14d">
     H2 - An increase knowledge of water quality issues (
     <code class="docutils literal notranslate">
      <span class="pre">
       l2409
      </span>
     </code>
     ) relates to an increased perception of severity (
     <code class="docutils literal notranslate">
      <span class="pre">
       l14d
      </span>
     </code>
     ).
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Initial findings:
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#h3-increased-education-a7a-relates-to-more-knowledge-about-water-quality-l2409">
     H3 - Increased education (
     <code class="docutils literal notranslate">
      <span class="pre">
       a7a
      </span>
     </code>
     ) relates to more knowledge about water quality (
     <code class="docutils literal notranslate">
      <span class="pre">
       l2409
      </span>
     </code>
     ).
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Initial findings
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Initial findings:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#h5-there-is-a-significant-difference-in-perception-of-severity-of-water-quality-issues-l14d-between-urban-and-rural-households-a91">
     H5 - There is a significant difference in perception of severity of water quality issues (
     <code class="docutils literal notranslate">
      <span class="pre">
       l14d
      </span>
     </code>
     ) between urban and rural households (
     <code class="docutils literal notranslate">
      <span class="pre">
       a91
      </span>
     </code>
     ).
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Initial findings:
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-descriptive-analysis">
   Additional descriptive analysis
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#l6">
     <code class="docutils literal notranslate">
      <span class="pre">
       l6
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#l7">
     <code class="docutils literal notranslate">
      <span class="pre">
       l7
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#normalize-data">
   Normalize Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#multivariable-statistical-analysis">
   Multivariable statistical analysis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#notes">
   NOTES
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="water-quality-perception-and-knowledge-in-china-data-analysis-condensed">
<h1>Water Quality, Perception and Knowledge in China: <em>Data Analysis (condensed)</em><a class="headerlink" href="#water-quality-perception-and-knowledge-in-china-data-analysis-condensed" title="Permalink to this headline">¶</a></h1>
<p>This document is the data analysis of water quality, water quality perception, and water quality knowledge in China. The analysis is driven primarily by two datasets - water quality (2017, per prefecture) and a national general social survey (China General Social Survey, 2010) with an environmental module.</p>
<div class="section" id="research-questions-and-hypotheses">
<h2>Research Questions and Hypotheses<a class="headerlink" href="#research-questions-and-hypotheses" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>Research Question</p></th>
<th class="text-align:left head"><p>H0 (Null Hypothesis)</p></th>
<th class="text-align:left head"><p>H1 (Hypothesis)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>R1 Is there a relationship between water quality and perception of water quality? (I.e. do perceptions and reality match)</p></td>
<td class="text-align:left"><p>Worse local water quality is independent of water quality perception.</p></td>
<td class="text-align:left"><p>Worse local (provincial) water quality relates to an increased perception of severity of water quality issues.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>R2 Does knowledge of water quality affect perception?</p></td>
<td class="text-align:left"><p>Increased knowledge is independent of perception.</p></td>
<td class="text-align:left"><p>An increase knowledge of water quality issues relates to an increased perception of severity.</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>R3 Does the level of obtained education relate to water quality knowledge?</p></td>
<td class="text-align:left"><p>Increased education is independent of knowledge of water quality.</p></td>
<td class="text-align:left"><p>Increased education relates to more knowledge about water quality.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>R4 Does the level of obtained education relate perception?</p></td>
<td class="text-align:left"><p>Increased education is independent of an increased perception of severity.</p></td>
<td class="text-align:left"><p>Increased education relates to an increased perception of severity</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>R5 Are there differences between water quality perception, and water quality knowledge, in rural vs. urban households?</p></td>
<td class="text-align:left"><p>There is no significant difference between urban and rural households.</p></td>
<td class="text-align:left"><p>There is a significant difference in perception of severity of water quality issues between urban and rural households.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="core-analyzed-data">
<h2>Core Analyzed Data<a class="headerlink" href="#core-analyzed-data" title="Permalink to this headline">¶</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>Code</p></th>
<th class="head"><p>English</p></th>
<th class="head"><p>Chinese</p></th>
<th class="head"><p>Value Range (used)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>s41</p></td>
<td><p>Province</p></td>
<td><p>省</p></td>
<td><p>Range, <em>see data analysis</em></p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>a2</p></td>
<td><p>Gender</p></td>
<td><p>性别</p></td>
<td><p>1 = male, 2 = female</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>a3a</p></td>
<td><p>Birth year</p></td>
<td><p>您的出生日期是什么</p></td>
<td><p>Birth year</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>a7a</p></td>
<td><p>Highest level of obtained education</p></td>
<td><p>您目前的最高教育程度是</p></td>
<td><p>1 = none, 13 = master’s and above</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>a91</p></td>
<td><p>Rural / agricultural household</p></td>
<td><p>请问目前您或者您配偶是否为农业户口(或者户口所在地为农村),且在农村(包括家乡和其它地方)有承包的旱地、水田、山林、水面等土地?</p></td>
<td><p>1 = yes, 2 = no</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>l14d</p></td>
<td><p>“How do you think the pollution of rivers, rivers and lakes in China is harmful to the environment?” (<em>Used to measure perception</em>)</p></td>
<td><p>您认为中国的江、河、湖泊的污染对环境的危害程度是?</p></td>
<td><p>1 = very important, 5 = not important at all</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>l2409</p></td>
<td><p>“In the domestic water pollution report, the water quality of Category V (5) is better than that of Category I (1)” (<em>Used to measure knowledge, response==2 is correct</em>)</p></td>
<td><p>国内水体污染报告中,V(5)类水质要比I(1)类水质好</p></td>
<td><p>1 = correct, <strong>2 = incorrect</strong></p></td>
</tr>
</tbody>
</table>
<p>More information about the thesis, motivation, and methodology is located in the main “thesis_analysis.ipynb” document.</p>
</div>
<div class="section" id="load-data">
<h2>Load Data<a class="headerlink" href="#load-data" title="Permalink to this headline">¶</a></h2>
<p>Load Python libraries</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># for some regression visualizations</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># for some visualizations</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span> <span class="c1"># for plots</span>
<span class="kn">import</span> <span class="nn">statsmodels.api</span> <span class="k">as</span> <span class="nn">sm</span> <span class="c1"># for statistical analysis</span>
<span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="k">as</span> <span class="nn">smf</span> <span class="c1"># for statistical analysis</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">preprocessing</span> <span class="c1"># for normalizing data</span>
<span class="kn">import</span> <span class="nn">pingouin</span> <span class="k">as</span> <span class="nn">pi</span> <span class="c1"># for statistical analysis</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Returns ALL columns when displaying DataFrame, useful for finding column names</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the standard theme for plots</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_theme</span><span class="p">(</span>
    <span class="c1"># palette=&#39;twilight&#39;</span>
    <span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;ticks&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Load CGSS (social survey) data from a Stata file</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;../data/cgss2010_12.dta&#39;</span><span class="p">,</span> <span class="n">preserve_dtypes</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">convert_categoricals</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>List categorical data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">categoricals</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;s41&quot;</span><span class="p">,</span><span class="s2">&quot;a2&quot;</span><span class="p">,</span><span class="s2">&quot;a91&quot;</span><span class="p">,</span><span class="s2">&quot;l1a&quot;</span><span class="p">,</span><span class="s2">&quot;l1b&quot;</span><span class="p">,</span><span class="s2">&quot;l7a&quot;</span><span class="p">,</span><span class="s2">&quot;l7b&quot;</span><span class="p">,</span><span class="s2">&quot;l2409&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>List important questions</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">important</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">,</span><span class="s1">&#39;s41&#39;</span><span class="p">,</span><span class="s1">&#39;a2&#39;</span><span class="p">,</span><span class="s1">&#39;a3a&#39;</span><span class="p">,</span><span class="s1">&#39;a7a&#39;</span><span class="p">,</span><span class="s1">&#39;a8a&#39;</span><span class="p">,</span><span class="s1">&#39;a91&#39;</span><span class="p">,</span><span class="s1">&#39;l1a&#39;</span><span class="p">,</span><span class="s1">&#39;l1b&#39;</span><span class="p">,</span><span class="s1">&#39;l6a&#39;</span><span class="p">,</span><span class="s1">&#39;l6b&#39;</span><span class="p">,</span><span class="s1">&#39;l7a&#39;</span><span class="p">,</span><span class="s1">&#39;l7b&#39;</span><span class="p">,</span><span class="s1">&#39;l8a&#39;</span><span class="p">,</span><span class="s1">&#39;l8b&#39;</span><span class="p">,</span><span class="s1">&#39;l137&#39;</span><span class="p">,</span><span class="s1">&#39;l14d&#39;</span><span class="p">,</span><span class="s1">&#39;l15a&#39;</span><span class="p">,</span><span class="s1">&#39;l15b&#39;</span><span class="p">,</span><span class="s1">&#39;l16c&#39;</span><span class="p">,</span><span class="s1">&#39;l20e&#39;</span><span class="p">,</span><span class="s1">&#39;l2409&#39;</span><span class="p">,</span><span class="s1">&#39;province&#39;</span><span class="p">,</span><span class="s1">&#39;province_en&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Convert categorical data into categorical data types</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss</span><span class="p">[</span><span class="n">categoricals</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>s41</th>
      <th>a2</th>
      <th>a91</th>
      <th>l1a</th>
      <th>l1b</th>
      <th>l7a</th>
      <th>l7b</th>
      <th>l2409</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>28.0</td>
      <td>2</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>28.0</td>
      <td>2</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>28.0</td>
      <td>2</td>
      <td>2.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>28.0</td>
      <td>2</td>
      <td>2.0</td>
      <td>8.0</td>
      <td>2.0</td>
      <td>98.0</td>
      <td>98.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>28.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>11778</th>
      <td>1.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11779</th>
      <td>1.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11780</th>
      <td>1.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11781</th>
      <td>1.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>10.0</td>
      <td>98.0</td>
      <td>8.0</td>
    </tr>
    <tr>
      <th>11782</th>
      <td>1.0</td>
      <td>1</td>
      <td>2.0</td>
      <td>9.0</td>
      <td>9.0</td>
      <td>10.0</td>
      <td>2.0</td>
      <td>2.0</td>
    </tr>
  </tbody>
</table>
<p>11783 rows × 8 columns</p>
</div></div></div>
</div>
<p>Load province data from a .csv, set province code as the index</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">provinces</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;prov.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Load water quality data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wqir</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../data/wqir2018_zh.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="merge-data-into-one-dataframe">
<h2>Merge data into one dataframe<a class="headerlink" href="#merge-data-into-one-dataframe" title="Permalink to this headline">¶</a></h2>
<p>Group the water quality data (WQIR) by province and compute the mean</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wqir_mean</span> <span class="o">=</span> <span class="n">wqir</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;province&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Merge the mean water quality per province and the province dataframe (matching names and province codes)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">merge</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">wqir_mean</span><span class="p">,</span> <span class="n">provinces</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;province&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Drop rank column, merge the previously merged column into the main cgss dataframe so that each entry has the mean water score from their province, plus the names of their province (Chinese short and full and English).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wq</span> <span class="o">=</span> <span class="n">merge</span><span class="p">[[</span><span class="s1">&#39;s41&#39;</span><span class="p">,</span><span class="s1">&#39;score&#39;</span><span class="p">,</span><span class="s1">&#39;province&#39;</span><span class="p">,</span><span class="s1">&#39;province_full&#39;</span><span class="p">,</span><span class="s1">&#39;province_en&#39;</span><span class="p">]]</span>
<span class="n">cgss_wq_full</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">cgss</span><span class="p">,</span><span class="n">wq</span><span class="p">,</span><span class="n">on</span><span class="o">=</span><span class="s1">&#39;s41&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Only analyze important questions and variables (drop remaining ones)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq</span> <span class="o">=</span> <span class="n">cgss_wq_full</span><span class="p">[</span><span class="n">important</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="testing-hypotheses-descriptive-analysis">
<h2>Testing Hypotheses (Descriptive Analysis)<a class="headerlink" href="#testing-hypotheses-descriptive-analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="h1-worse-local-provincial-water-quality-score-increases-relates-to-an-increased-perception-of-severity-of-water-quality-issues-l14d-decreases">
<h3>H1 - Worse local (provincial) water quality (<code class="docutils literal notranslate"><span class="pre">score</span></code> increases) relates to an increased perception of severity of water quality issues (<code class="docutils literal notranslate"><span class="pre">l14d</span></code> decreases).<a class="headerlink" href="#h1-worse-local-provincial-water-quality-score-increases-relates-to-an-increased-perception-of-severity-of-water-quality-issues-l14d-decreases" title="Permalink to this headline">¶</a></h3>
<p>First, clean the data for <code class="docutils literal notranslate"><span class="pre">l14d</span></code> by dropping NaN, negative and “cannot answer” values:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l14d</span> <span class="o">=</span> <span class="n">cgss_wq</span><span class="p">[</span><span class="n">cgss_wq</span><span class="p">[</span><span class="s2">&quot;l14d&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cgss_wq_l14d</span> <span class="o">=</span> <span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s2">&quot;l14d&quot;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Visualize the results: Perception vs. Water Quality (more details about sns.lmplot in the Hypothesis 4 section)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h1_fig1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l14d</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;l14d&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;score&#39;</span><span class="p">,</span>
    <span class="n">x_estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">h1_fig1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/h1_fig1.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_38_0.png" src="_images/thesis_analysis_pure_38_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s1">&#39;l14d&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n</th>
      <th>r</th>
      <th>CI95%</th>
      <th>r2</th>
      <th>adj_r2</th>
      <th>p-val</th>
      <th>BF10</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>pearson</th>
      <td>3253</td>
      <td>-0.1023</td>
      <td>[-0.14, -0.07]</td>
      <td>0.010465</td>
      <td>0.009856</td>
      <td>4.980902e-09</td>
      <td>5.811e+05</td>
      <td>0.999951</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="section" id="initial-findings">
<h4>Initial findings:<a class="headerlink" href="#initial-findings" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>While the correlation is significant (Low <span class="math notranslate nohighlight">\(p\)</span> value == more compelled to reject null hypothesis), there is a poor regression fit (low r²)</p></li>
<li><p>Multivariable analysis required for further investigation</p></li>
</ul>
</div>
</div>
<div class="section" id="h2-an-increase-knowledge-of-water-quality-issues-l2409-relates-to-an-increased-perception-of-severity-l14d">
<h3>H2 - An increase knowledge of water quality issues (<code class="docutils literal notranslate"><span class="pre">l2409</span></code>) relates to an increased perception of severity (<code class="docutils literal notranslate"><span class="pre">l14d</span></code>).<a class="headerlink" href="#h2-an-increase-knowledge-of-water-quality-issues-l2409-relates-to-an-increased-perception-of-severity-l14d" title="Permalink to this headline">¶</a></h3>
<p>Clean data for <code class="docutils literal notranslate"><span class="pre">l2409</span></code> using previously cleaned <code class="docutils literal notranslate"><span class="pre">l14d</span></code> dataframe:
<strong>NOTE</strong>: Only keeping binary responses (dropping <em>Can’t respond</em> value <code class="docutils literal notranslate"><span class="pre">8</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l14d_l2409</span> <span class="o">=</span> <span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s2">&quot;l2409&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cgss_wq_l14d_l2409</span> <span class="o">=</span> <span class="n">cgss_wq_l14d_l2409</span><span class="p">[</span><span class="n">cgss_wq_l14d_l2409</span><span class="p">[</span><span class="s2">&quot;l2409&quot;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h2</span> <span class="o">=</span> <span class="n">cgss_wq_l14d_l2409</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;l2409&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">h2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>score</th>
      <th>s41</th>
      <th>a2</th>
      <th>a3a</th>
      <th>a7a</th>
      <th>a8a</th>
      <th>a91</th>
      <th>l1a</th>
      <th>l1b</th>
      <th>l6a</th>
      <th>l6b</th>
      <th>l7a</th>
      <th>l7b</th>
      <th>l8a</th>
      <th>l8b</th>
      <th>l137</th>
      <th>l14d</th>
      <th>l15a</th>
      <th>l15b</th>
      <th>l16c</th>
      <th>l20e</th>
    </tr>
    <tr>
      <th>l2409</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1.0</th>
      <td>16.223121</td>
      <td>16.046099</td>
      <td>1.482270</td>
      <td>1964.570922</td>
      <td>5.109929</td>
      <td>1258061.250</td>
      <td>1.576512</td>
      <td>6.521277</td>
      <td>6.414894</td>
      <td>3.833333</td>
      <td>2.414894</td>
      <td>7.414894</td>
      <td>6.581560</td>
      <td>2.836879</td>
      <td>2.521277</td>
      <td>3.567376</td>
      <td>2.382979</td>
      <td>2.471631</td>
      <td>2.297872</td>
      <td>2.769504</td>
      <td>2.329787</td>
    </tr>
    <tr>
      <th>2.0</th>
      <td>16.891944</td>
      <td>15.031088</td>
      <td>1.452504</td>
      <td>1965.616580</td>
      <td>6.341969</td>
      <td>1422613.875</td>
      <td>1.704663</td>
      <td>5.155440</td>
      <td>6.892919</td>
      <td>3.827288</td>
      <td>2.018998</td>
      <td>7.652850</td>
      <td>8.120898</td>
      <td>3.138169</td>
      <td>2.737478</td>
      <td>3.854922</td>
      <td>2.186528</td>
      <td>2.485320</td>
      <td>2.412781</td>
      <td>2.892919</td>
      <td>2.307427</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Count the number of responses per <code class="docutils literal notranslate"><span class="pre">l2409</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l14d_l2409</span><span class="p">[</span><span class="s2">&quot;l2409&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.0    579
1.0    282
Name: l2409, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Now, plot: (<code class="docutils literal notranslate"><span class="pre">l2409==2</span></code> is the correct answer)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h2_fig1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l14d_l2409</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;l2409&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;l14d&#39;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;a91&#39;</span><span class="p">,</span>
    <span class="n">split</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;violin&#39;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">h2_fig1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/h2_fig1.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_48_0.png" src="_images/thesis_analysis_pure_48_0.png" />
</div>
</div>
<p>Plot again - note that the line connecting the two isn’t relevant or accurate</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l14d_l2409</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;l2409&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;l14d&#39;</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;point&#39;</span><span class="p">,</span>
    <span class="c1">#hue=&#39;a91&#39;,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x7f2a3b44a280&gt;
</pre></div>
</div>
<img alt="_images/thesis_analysis_pure_50_1.png" src="_images/thesis_analysis_pure_50_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cgss_wq_l14d_l2409</span><span class="p">[</span><span class="s1">&#39;l2409&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">cgss_wq_l14d_l2409</span><span class="p">[</span><span class="s1">&#39;l14d&#39;</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;kendall&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n</th>
      <th>r</th>
      <th>CI95%</th>
      <th>r2</th>
      <th>adj_r2</th>
      <th>p-val</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>kendall</th>
      <td>861</td>
      <td>-0.10499</td>
      <td>[-0.17, -0.04]</td>
      <td>0.011023</td>
      <td>0.008718</td>
      <td>0.000906</td>
      <td>0.870417</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="section" id="id1">
<h4>Initial findings:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Increased water quality knowledge <code class="docutils literal notranslate"><span class="pre">l2409==2</span></code> has an increased perception (decreased <code class="docutils literal notranslate"><span class="pre">l14d</span></code>).</p>
<ul>
<li><p>Statistically significant (<span class="math notranslate nohighlight">\(p&lt;=0.05\)</span>) but weakly correlated (<span class="math notranslate nohighlight">\(0&lt;r&lt;.19\)</span>)</p></li>
</ul>
</li>
<li><p>However, this trend is no longer visible when factoring for rural/urban <code class="docutils literal notranslate"><span class="pre">a91</span></code>, education level <code class="docutils literal notranslate"><span class="pre">a7a</span></code>, etc</p></li>
<li><p>Other large differences between rural/non-rural exist (see <code class="docutils literal notranslate"><span class="pre">h2</span></code> above)</p></li>
<li><p>More analysis is needed</p></li>
</ul>
</div>
</div>
<div class="section" id="h3-increased-education-a7a-relates-to-more-knowledge-about-water-quality-l2409">
<h3>H3 - Increased education (<code class="docutils literal notranslate"><span class="pre">a7a</span></code>) relates to more knowledge about water quality (<code class="docutils literal notranslate"><span class="pre">l2409</span></code>).<a class="headerlink" href="#h3-increased-education-a7a-relates-to-more-knowledge-about-water-quality-l2409" title="Permalink to this headline">¶</a></h3>
<p>Clean data for <code class="docutils literal notranslate"><span class="pre">l2409</span></code></p>
<p>Again, <strong>NOTE</strong>: Only keeping binary responses (dropping <em>Can’t respond</em> value <code class="docutils literal notranslate"><span class="pre">8</span></code>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l2409</span> <span class="o">=</span> <span class="n">cgss_wq</span><span class="p">[</span><span class="n">cgss_wq</span><span class="p">[</span><span class="s2">&quot;l2409&quot;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cgss_wq_l2409</span> <span class="o">=</span> <span class="n">cgss_wq_l2409</span><span class="p">[</span><span class="n">cgss_wq_l2409</span><span class="p">[</span><span class="s2">&quot;l2409&quot;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Now, clean for education <code class="docutils literal notranslate"><span class="pre">a7a</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l2409_a7a</span> <span class="o">=</span> <span class="n">cgss_wq_l2409</span><span class="p">[</span><span class="n">cgss_wq_l2409</span><span class="p">[</span><span class="s2">&quot;a7a&quot;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cgss_wq_l2409_a7a</span> <span class="o">=</span> <span class="n">cgss_wq_l2409_a7a</span><span class="p">[</span><span class="n">cgss_wq_l2409_a7a</span><span class="p">[</span><span class="s2">&quot;a7a&quot;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">14</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Now, plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h3_fig1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l2409_a7a</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a7a&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;l2409&#39;</span><span class="p">,</span>
    <span class="n">x_estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">h3_fig1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/h3_fig1.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_59_0.png" src="_images/thesis_analysis_pure_59_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h3_fig2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">catplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l2409_a7a</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;l2409&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;a7a&#39;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;a91&#39;</span><span class="p">,</span>
    <span class="n">split</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;violin&#39;</span><span class="p">,</span>
    <span class="n">scale</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">h3_fig2</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/h3_fig2.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_60_0.png" src="_images/thesis_analysis_pure_60_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cgss_wq_l2409_a7a</span><span class="p">[</span><span class="s1">&#39;l2409&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">cgss_wq_l2409_a7a</span><span class="p">[</span><span class="s1">&#39;a7a&#39;</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;spearman&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n</th>
      <th>r</th>
      <th>CI95%</th>
      <th>r2</th>
      <th>adj_r2</th>
      <th>p-val</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>spearman</th>
      <td>881</td>
      <td>0.163802</td>
      <td>[0.1, 0.23]</td>
      <td>0.026831</td>
      <td>0.024614</td>
      <td>0.000001</td>
      <td>0.998361</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="section" id="id2">
<h4>Initial findings<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>There seems to be a slight trend (education increase relates to knowledge increase)</p></li>
<li><p>The violin plots show differences in rural vs non-rural responses</p></li>
<li><p>More analysis is needed</p></li>
</ul>
<p>21</p>
<p>First, see the distribution of education:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq</span><span class="p">[[</span><span class="s2">&quot;a7a&quot;</span><span class="p">,</span><span class="s2">&quot;l14d&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([[&lt;AxesSubplot:title={&#39;center&#39;:&#39;a7a&#39;}&gt;,
        &lt;AxesSubplot:title={&#39;center&#39;:&#39;l14d&#39;}&gt;]], dtype=object)
</pre></div>
</div>
<img alt="_images/thesis_analysis_pure_65_1.png" src="_images/thesis_analysis_pure_65_1.png" />
</div>
</div>
<p>Make new cleaned dataset with cleaned <code class="docutils literal notranslate"><span class="pre">a7a</span></code> values from the previously cleaned <code class="docutils literal notranslate"><span class="pre">l14d</span></code> values</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l14d_a7a</span> <span class="o">=</span> <span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s1">&#39;a7a&#39;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Group by each education level (year) and aggregate the mean</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h4</span> <span class="o">=</span> <span class="n">cgss_wq_l14d_a7a</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;a7a&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Plot result (perception vs. education level).</p>
<p><strong>Note</strong>: Since <code class="docutils literal notranslate"><span class="pre">a7a</span></code> is the index of h4, it needs to be reset before being plotted in regplot (info <a class="reference external" href="https://www.reddit.com/r/learnpython/comments/3cjnpg/seaborn_xaxis_as_index/">here</a>)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h4_fig1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">h4</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a7a&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;l14d&#39;</span>
    <span class="p">)</span>
<span class="n">h4_fig1</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/h4_fig1.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_71_0.png" src="_images/thesis_analysis_pure_71_0.png" />
</div>
</div>
<p>It’s better (?) to use an lmplot (similar to regplot) and calculate the mean per x bin, from <a class="reference external" href="https://seaborn.pydata.org/tutorial/regression.html">here</a>.</p>
<blockquote>
<div><p>A second option is to collapse over the observations in each discrete bin to plot an estimate of central tendency along with a confidence interval:</p>
</div></blockquote>
<p>Additionally, the lmplot allows for multiple regressions to be plotted on the same plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h4_fig2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l14d_a7a</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;a7a&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;l14d&#39;</span><span class="p">,</span>
    <span class="n">x_estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;a91&#39;</span><span class="p">,</span>
    <span class="n">markers</span><span class="o">=</span><span class="p">([</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]),</span>
    <span class="p">)</span>
<span class="n">h4_fig2</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/h4_fig2.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_73_0.png" src="_images/thesis_analysis_pure_73_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cgss_wq_l14d_a7a</span><span class="p">[</span><span class="s1">&#39;a7a&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">cgss_wq_l14d_a7a</span><span class="p">[</span><span class="s1">&#39;l14d&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n</th>
      <th>r</th>
      <th>CI95%</th>
      <th>r2</th>
      <th>adj_r2</th>
      <th>p-val</th>
      <th>BF10</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>pearson</th>
      <td>3252</td>
      <td>-0.210865</td>
      <td>[-0.24, -0.18]</td>
      <td>0.044464</td>
      <td>0.043876</td>
      <td>5.256292e-34</td>
      <td>2.634e+30</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="id3">
<h3>Initial findings:<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>There is a clear trend between education and perception</p></li>
<li><p>Rural households have a higher <code class="docutils literal notranslate"><span class="pre">l14d</span></code> than non-rural at each education level</p>
<ul>
<li><p>This difference decreases as education increases</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="h5-there-is-a-significant-difference-in-perception-of-severity-of-water-quality-issues-l14d-between-urban-and-rural-households-a91">
<h3>H5 - There is a significant difference in perception of severity of water quality issues (<code class="docutils literal notranslate"><span class="pre">l14d</span></code>) between urban and rural households (<code class="docutils literal notranslate"><span class="pre">a91</span></code>).<a class="headerlink" href="#h5-there-is-a-significant-difference-in-perception-of-severity-of-water-quality-issues-l14d-between-urban-and-rural-households-a91" title="Permalink to this headline">¶</a></h3>
<p>Reuse the cleaned data from <code class="docutils literal notranslate"><span class="pre">H1</span></code> for question <code class="docutils literal notranslate"><span class="pre">l14d</span></code>, see number of responses by type by grouping by <code class="docutils literal notranslate"><span class="pre">a91</span></code>, where a91==1 is rural</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l14d</span><span class="p">[[</span><span class="s1">&#39;a91&#39;</span><span class="p">,</span><span class="s1">&#39;l14d&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;a91&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>l14d</th>
    </tr>
    <tr>
      <th>a91</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1.0</th>
      <td>1257</td>
    </tr>
    <tr>
      <th>2.0</th>
      <td>1995</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Calculate the mean <code class="docutils literal notranslate"><span class="pre">l14d</span></code> grouped by rural / urban</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h5</span> <span class="o">=</span> <span class="n">cgss_wq_l14d</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;a91&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span>
<span class="n">h5</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>score</th>
      <th>s41</th>
      <th>a2</th>
      <th>a3a</th>
      <th>a7a</th>
      <th>a8a</th>
      <th>l1a</th>
      <th>l1b</th>
      <th>l6a</th>
      <th>l6b</th>
      <th>l7a</th>
      <th>l7b</th>
      <th>l8a</th>
      <th>l8b</th>
      <th>l137</th>
      <th>l14d</th>
      <th>l15a</th>
      <th>l15b</th>
      <th>l16c</th>
      <th>l20e</th>
      <th>l2409</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000e+00</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
      <td>2.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>16.544259</td>
      <td>15.638292</td>
      <td>1.516332</td>
      <td>1963.058528</td>
      <td>4.859155</td>
      <td>1.336766e+06</td>
      <td>8.288372</td>
      <td>9.239028</td>
      <td>3.716190</td>
      <td>2.433684</td>
      <td>10.954489</td>
      <td>10.937637</td>
      <td>2.868745</td>
      <td>2.527442</td>
      <td>3.742055</td>
      <td>2.354314</td>
      <td>3.036047</td>
      <td>3.006931</td>
      <td>3.283117</td>
      <td>2.489414</td>
      <td>6.239900</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.729610</td>
      <td>1.787362</td>
      <td>0.011284</td>
      <td>0.744155</td>
      <td>1.950825</td>
      <td>4.038638e+05</td>
      <td>1.285412</td>
      <td>1.589209</td>
      <td>0.139791</td>
      <td>0.399241</td>
      <td>2.420259</td>
      <td>1.801677</td>
      <td>0.223903</td>
      <td>0.177754</td>
      <td>0.141492</td>
      <td>0.257222</td>
      <td>0.121157</td>
      <td>0.160084</td>
      <td>0.260029</td>
      <td>0.254049</td>
      <td>0.167012</td>
    </tr>
    <tr>
      <th>min</th>
      <td>16.028347</td>
      <td>14.374436</td>
      <td>1.508353</td>
      <td>1962.532331</td>
      <td>3.479714</td>
      <td>1.051192e+06</td>
      <td>7.379449</td>
      <td>8.115288</td>
      <td>3.617343</td>
      <td>2.151378</td>
      <td>9.243108</td>
      <td>9.663659</td>
      <td>2.710422</td>
      <td>2.401750</td>
      <td>3.642005</td>
      <td>2.172431</td>
      <td>2.950376</td>
      <td>2.893734</td>
      <td>3.099248</td>
      <td>2.309774</td>
      <td>6.121805</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>16.286303</td>
      <td>15.006364</td>
      <td>1.512343</td>
      <td>1962.795430</td>
      <td>4.169434</td>
      <td>1.193979e+06</td>
      <td>7.833910</td>
      <td>8.677158</td>
      <td>3.666767</td>
      <td>2.292531</td>
      <td>10.098799</td>
      <td>10.300648</td>
      <td>2.789583</td>
      <td>2.464596</td>
      <td>3.692030</td>
      <td>2.263373</td>
      <td>2.993212</td>
      <td>2.950333</td>
      <td>3.191182</td>
      <td>2.399594</td>
      <td>6.180852</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>16.544259</td>
      <td>15.638292</td>
      <td>1.516332</td>
      <td>1963.058528</td>
      <td>4.859155</td>
      <td>1.336766e+06</td>
      <td>8.288372</td>
      <td>9.239028</td>
      <td>3.716190</td>
      <td>2.433684</td>
      <td>10.954489</td>
      <td>10.937637</td>
      <td>2.868745</td>
      <td>2.527442</td>
      <td>3.742055</td>
      <td>2.354314</td>
      <td>3.036047</td>
      <td>3.006931</td>
      <td>3.283117</td>
      <td>2.489414</td>
      <td>6.239900</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>16.802215</td>
      <td>16.270220</td>
      <td>1.520321</td>
      <td>1963.321627</td>
      <td>5.548876</td>
      <td>1.479554e+06</td>
      <td>8.742834</td>
      <td>9.800898</td>
      <td>3.765614</td>
      <td>2.574837</td>
      <td>11.810180</td>
      <td>11.574626</td>
      <td>2.947906</td>
      <td>2.590287</td>
      <td>3.792080</td>
      <td>2.445256</td>
      <td>3.078883</td>
      <td>3.063529</td>
      <td>3.375051</td>
      <td>2.579234</td>
      <td>6.298948</td>
    </tr>
    <tr>
      <th>max</th>
      <td>17.060171</td>
      <td>16.902147</td>
      <td>1.524311</td>
      <td>1963.584726</td>
      <td>6.238596</td>
      <td>1.622341e+06</td>
      <td>9.197295</td>
      <td>10.362768</td>
      <td>3.815038</td>
      <td>2.715990</td>
      <td>12.665871</td>
      <td>12.211615</td>
      <td>3.027068</td>
      <td>2.653133</td>
      <td>3.842105</td>
      <td>2.536197</td>
      <td>3.121718</td>
      <td>3.120127</td>
      <td>3.466985</td>
      <td>2.669053</td>
      <td>6.357995</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s1">&#39;a91&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">cgss_wq_l14d</span><span class="p">[</span><span class="s1">&#39;l14d&#39;</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;spearman&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n</th>
      <th>r</th>
      <th>CI95%</th>
      <th>r2</th>
      <th>adj_r2</th>
      <th>p-val</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>spearman</th>
      <td>3252</td>
      <td>-0.201821</td>
      <td>[-0.23, -0.17]</td>
      <td>0.040732</td>
      <td>0.040141</td>
      <td>3.094507e-31</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="section" id="id4">
<h4>Initial findings:<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>There is a difference between rural and urban households (rural have less severe perception of water quality)</p></li>
<li><p>Education level (<code class="docutils literal notranslate"><span class="pre">a7a</span></code>) is significantly different between urban and rural households</p></li>
</ul>
<hr class="docutils" />
<div class="alert alert-block alert-info">
<b>Note:</b> Sections below are not final. Work in progress (March 8th, 2021).</div></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="additional-descriptive-analysis">
<h2>Additional descriptive analysis<a class="headerlink" href="#additional-descriptive-analysis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="l6">
<h3><code class="docutils literal notranslate"><span class="pre">l6</span></code><a class="headerlink" href="#l6" title="Permalink to this headline">¶</a></h3>
<p>Start with <code class="docutils literal notranslate"><span class="pre">l6</span></code>, where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">l6a</span></code> asks “Generally speaking, how much do you care about environmental issues?</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">l6b</span></code> asks “Based on your own judgment, on the whole, do you think the environmental problems facing China are serious?”</p></li>
</ul>
<p>First, clean data: (<strong>Note</strong>: When I tried this in one step (two columns), I was having graph issues later, so I did each step individually)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l6</span> <span class="o">=</span> <span class="n">cgss_wq</span><span class="p">[</span><span class="n">cgss_wq</span><span class="p">[</span><span class="s1">&#39;l6a&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cgss_wq_l6</span> <span class="o">=</span> <span class="n">cgss_wq_l6</span><span class="p">[</span><span class="n">cgss_wq_l6</span><span class="p">[</span><span class="s1">&#39;l6a&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">]</span>
<span class="n">cgss_wq_l6</span> <span class="o">=</span> <span class="n">cgss_wq_l6</span><span class="p">[</span><span class="n">cgss_wq_l6</span><span class="p">[</span><span class="s1">&#39;l6b&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">cgss_wq_l6</span> <span class="o">=</span> <span class="n">cgss_wq_l6</span><span class="p">[</span><span class="n">cgss_wq_l6</span><span class="p">[</span><span class="s1">&#39;l6b&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Plot</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">cgss_wq_l6</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="s1">&#39;l6a&#39;</span><span class="p">,</span><span class="s1">&#39;l6b&#39;</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/l6_fig1.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ipython-input-39-28fbaadde786&gt;:2: UserWarning: To output multiple subplots, the figure containing the passed axes is being cleared
  cgss_wq_l6.hist([&#39;l6a&#39;,&#39;l6b&#39;], ax=ax)
</pre></div>
</div>
<img alt="_images/thesis_analysis_pure_91_1.png" src="_images/thesis_analysis_pure_91_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l6_fig2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l6</span><span class="p">,</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;l6a&#39;</span><span class="p">,</span>
    <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;l6b&#39;</span><span class="p">,</span>
    <span class="n">x_estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;a91&#39;</span>
    <span class="p">)</span>
<span class="n">l6_fig2</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/l6_fig2.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_92_0.png" src="_images/thesis_analysis_pure_92_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pi</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cgss_wq_l6</span><span class="p">[</span><span class="s1">&#39;l6a&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">cgss_wq_l6</span><span class="p">[</span><span class="s1">&#39;l6b&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n</th>
      <th>r</th>
      <th>CI95%</th>
      <th>r2</th>
      <th>adj_r2</th>
      <th>p-val</th>
      <th>BF10</th>
      <th>power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>pearson</th>
      <td>3362</td>
      <td>-0.272594</td>
      <td>[-0.3, -0.24]</td>
      <td>0.074307</td>
      <td>0.073756</td>
      <td>2.322155e-58</td>
      <td>4.335e+54</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="l7">
<h3><code class="docutils literal notranslate"><span class="pre">l7</span></code><a class="headerlink" href="#l7" title="Permalink to this headline">¶</a></h3>
<p>Compare with <code class="docutils literal notranslate"><span class="pre">l7</span></code> (“Which issue do you think is the most important environmental issue in China?”)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">l7a</span></code>: most important</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">l7b</span></code>: 2nd most important</p></li>
</ul>
<p>Values:</p>
<ul class="simple">
<li><p>Air Pollution - 1</p></li>
<li><p>Fertilizer and pesticide pollution - 2</p></li>
<li><p>Water scarcity - 3</p></li>
<li><p>Water pollution - 4</p></li>
<li><p>Nuclear waste - 5</p></li>
<li><p>Disposal of domestic waste - 6</p></li>
<li><p>Climate Change - 7</p></li>
<li><p>Genetically modified food - 8</p></li>
<li><p>Depletion of natural resources - 9</p></li>
<li><p>None of the above - 10</p></li>
<li><p>Cannot select - 98</p></li>
</ul>
<p>Make label dictionary</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l7_labels</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Air Pollution&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Fertilizer and pesticide pollution&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Water scarcity&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Water pollution&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;Nuclear waste&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;Disposal of domestic waste&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;Climate Change&#39;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;Genetically modified food&#39;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;Depletion of natural resources&#39;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;None of the above&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Cannot select&#39;</span><span class="p">:</span><span class="mi">98</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Convert to dataframe</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l7_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">l7_labels</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;l7a&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Attempting to put labels on histogram below, but can’t</strong></p>
<p>Clean data, drop 10 &amp; 98 (use the ‘~’ to negate the .isin() function)
Cleaning both at the same time results in the same as doing it individually</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l7</span><span class="o">=</span><span class="n">cgss_wq</span><span class="p">[</span><span class="o">~</span><span class="n">cgss_wq</span><span class="p">[[</span><span class="s1">&#39;l7a&#39;</span><span class="p">,</span><span class="s1">&#39;l7b&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">98</span><span class="p">])]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cgss_wq_l7</span><span class="p">[[</span><span class="s1">&#39;l7a&#39;</span><span class="p">,</span><span class="s1">&#39;l7b&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>l7a</th>
      <th>l7b</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>3253.000000</td>
      <td>3298.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>3.554565</td>
      <td>3.990297</td>
    </tr>
    <tr>
      <th>std</th>
      <td>2.478664</td>
      <td>2.725078</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>4.000000</td>
      <td>4.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>6.000000</td>
      <td>6.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>10.000000</td>
      <td>10.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">cgss_wq_l7</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="s1">&#39;l7a&#39;</span><span class="p">,</span><span class="s1">&#39;l7b&#39;</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/l7_fig1.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;ipython-input-46-f38965d94704&gt;:2: UserWarning: To output multiple subplots, the figure containing the passed axes is being cleared
  cgss_wq_l7.hist([&#39;l7a&#39;,&#39;l7b&#39;], ax=ax)
</pre></div>
</div>
<img alt="_images/thesis_analysis_pure_104_1.png" src="_images/thesis_analysis_pure_104_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l7_fig2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l7</span><span class="p">,</span> 
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;l7a&#39;</span><span class="p">,</span> 
    <span class="c1"># hue=&#39;l7b&#39;, </span>
    <span class="n">discrete</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
    <span class="c1"># multiple=&#39;stack&#39;,</span>
    <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;hist&#39;</span>
    <span class="p">)</span>
<span class="n">l7_fig2</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/l7_fig2.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_105_0.png" src="_images/thesis_analysis_pure_105_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">l7_fig3</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">cgss_wq_l7</span><span class="p">,</span> 
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;l7b&#39;</span><span class="p">,</span>
    <span class="c1"># hue=&#39;l7b&#39;, </span>
    <span class="n">discrete</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
    <span class="c1"># multiple=&#39;stack&#39;, </span>
    <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;hist&#39;</span>
    <span class="p">)</span>
<span class="n">l7_fig3</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;outputs/l7_fig3.svg&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/thesis_analysis_pure_106_0.png" src="_images/thesis_analysis_pure_106_0.png" />
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="normalize-data">
<h2>Normalize Data<a class="headerlink" href="#normalize-data" title="Permalink to this headline">¶</a></h2>
</div>
<hr class="docutils" />
<div class="section" id="multivariable-statistical-analysis">
<h2>Multivariable statistical analysis<a class="headerlink" href="#multivariable-statistical-analysis" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ols_perception</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;l14d ~ score + C(a2) + a3a + a7a + C(a91)&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">cgss_wq</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">ols_perception</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>          <td>l14d</td>       <th>  R-squared:         </th> <td>   0.066</td> 
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.064</td> 
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   51.50</td> 
</tr>
<tr>
  <th>Date:</th>             <td>Mon, 08 Mar 2021</td> <th>  Prob (F-statistic):</th> <td>9.21e-52</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>09:36:22</td>     <th>  Log-Likelihood:    </th> <td> -7618.3</td> 
</tr>
<tr>
  <th>No. Observations:</th>      <td>  3671</td>      <th>  AIC:               </th> <td>1.525e+04</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  3665</td>      <th>  BIC:               </th> <td>1.529e+04</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     5</td>      <th>                     </th>     <td> </td>    
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>    
</tr>
</table>
<table class="simpletable">
<tr>
        <td></td>           <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>     <td>    4.4156</td> <td>    1.174</td> <td>    3.761</td> <td> 0.000</td> <td>    2.114</td> <td>    6.717</td>
</tr>
<tr>
  <th>C(a2)[T.2]</th>    <td>    0.0559</td> <td>    0.065</td> <td>    0.865</td> <td> 0.387</td> <td>   -0.071</td> <td>    0.183</td>
</tr>
<tr>
  <th>C(a91)[T.1.0]</th> <td>    2.3748</td> <td>    0.591</td> <td>    4.018</td> <td> 0.000</td> <td>    1.216</td> <td>    3.533</td>
</tr>
<tr>
  <th>C(a91)[T.2.0]</th> <td>    2.0408</td> <td>    0.585</td> <td>    3.487</td> <td> 0.000</td> <td>    0.893</td> <td>    3.188</td>
</tr>
<tr>
  <th>score</th>         <td>   -0.0248</td> <td>    0.007</td> <td>   -3.446</td> <td> 0.001</td> <td>   -0.039</td> <td>   -0.011</td>
</tr>
<tr>
  <th>a3a</th>           <td>   -0.0014</td> <td>    0.001</td> <td>   -1.518</td> <td> 0.129</td> <td>   -0.003</td> <td>    0.000</td>
</tr>
<tr>
  <th>a7a</th>           <td>   -0.1223</td> <td>    0.012</td> <td>  -10.140</td> <td> 0.000</td> <td>   -0.146</td> <td>   -0.099</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>912.726</td> <th>  Durbin-Watson:     </th> <td>   1.849</td>
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td>1900.260</td>
</tr>
<tr>
  <th>Skew:</th>          <td> 1.460</td>  <th>  Prob(JB):          </th> <td>    0.00</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 4.974</td>  <th>  Cond. No.          </th> <td>1.87e+19</td>
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The smallest eigenvalue is 4.06e-29. This might indicate that there are<br/>strong multicollinearity problems or that the design matrix is singular.</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ols_knowledge</span> <span class="o">=</span> <span class="n">smf</span><span class="o">.</span><span class="n">ols</span><span class="p">(</span><span class="s1">&#39;l2409 ~ score + C(a2) + C(a91)&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">cgss_wq</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
<span class="n">ols_knowledge</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="simpletable">
<caption>OLS Regression Results</caption>
<tr>
  <th>Dep. Variable:</th>          <td>l2409</td>      <th>  R-squared:         </th> <td>   0.008</td> 
</tr>
<tr>
  <th>Model:</th>                   <td>OLS</td>       <th>  Adj. R-squared:    </th> <td>   0.008</td> 
</tr>
<tr>
  <th>Method:</th>             <td>Least Squares</td>  <th>  F-statistic:       </th> <td>   10.30</td> 
</tr>
<tr>
  <th>Date:</th>             <td>Mon, 08 Mar 2021</td> <th>  Prob (F-statistic):</th> <td>9.48e-07</td> 
</tr>
<tr>
  <th>Time:</th>                 <td>09:36:22</td>     <th>  Log-Likelihood:    </th> <td> -9076.6</td> 
</tr>
<tr>
  <th>No. Observations:</th>      <td>  3671</td>      <th>  AIC:               </th> <td>1.816e+04</td>
</tr>
<tr>
  <th>Df Residuals:</th>          <td>  3667</td>      <th>  BIC:               </th> <td>1.819e+04</td>
</tr>
<tr>
  <th>Df Model:</th>              <td>     3</td>      <th>                     </th>     <td> </td>    
</tr>
<tr>
  <th>Covariance Type:</th>      <td>nonrobust</td>    <th>                     </th>     <td> </td>    
</tr>
</table>
<table class="simpletable">
<tr>
        <td></td>           <th>coef</th>     <th>std err</th>      <th>t</th>      <th>P>|t|</th>  <th>[0.025</th>    <th>0.975]</th>  
</tr>
<tr>
  <th>Intercept</th>     <td>    3.9345</td> <td>    0.124</td> <td>   31.740</td> <td> 0.000</td> <td>    3.691</td> <td>    4.178</td>
</tr>
<tr>
  <th>C(a2)[T.2]</th>    <td>    0.3458</td> <td>    0.095</td> <td>    3.643</td> <td> 0.000</td> <td>    0.160</td> <td>    0.532</td>
</tr>
<tr>
  <th>C(a91)[T.1.0]</th> <td>    2.1612</td> <td>    0.076</td> <td>   28.491</td> <td> 0.000</td> <td>    2.013</td> <td>    2.310</td>
</tr>
<tr>
  <th>C(a91)[T.2.0]</th> <td>    1.7733</td> <td>    0.082</td> <td>   21.725</td> <td> 0.000</td> <td>    1.613</td> <td>    1.933</td>
</tr>
<tr>
  <th>score</th>         <td>    0.0185</td> <td>    0.011</td> <td>    1.747</td> <td> 0.081</td> <td>   -0.002</td> <td>    0.039</td>
</tr>
</table>
<table class="simpletable">
<tr>
  <th>Omnibus:</th>       <td>617.759</td> <th>  Durbin-Watson:     </th> <td>   1.683</td> 
</tr>
<tr>
  <th>Prob(Omnibus):</th> <td> 0.000</td>  <th>  Jarque-Bera (JB):  </th> <td> 991.087</td> 
</tr>
<tr>
  <th>Skew:</th>          <td>-1.273</td>  <th>  Prob(JB):          </th> <td>6.14e-216</td>
</tr>
<tr>
  <th>Kurtosis:</th>      <td> 3.017</td>  <th>  Cond. No.          </th> <td>1.50e+17</td> 
</tr>
</table><br/><br/>Notes:<br/>[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.<br/>[2] The smallest eigenvalue is 4.84e-29. This might indicate that there are<br/>strong multicollinearity problems or that the design matrix is singular.</div></div>
</div>
</div>
<div class="section" id="notes">
<h2>NOTES<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Normalize variables (variance is different)</p></li>
<li><p>Cannot use OLS, use LOGIT (logistic regression)</p></li>
</ul>
<p>Things to change in the code</p>
<ol class="simple">
<li><p>not use OLS for categorical output but use LOGIT (logitstic regression) to model categorical output</p></li>
<li><p>normalise continous variables as in the example notebook</p></li>
<li><p>Use the C(…) for categoricals</p></li>
<li><p>To use to logit, you need a binary output:
4.a remove ‘8’ answers to construct a first model and validate it
4.b. since most answers are ‘8’ and you don’t want to discard them, create a new logistic regression model with ternary output (this is possible)</p></li>
</ol>
<p>R² shows model explains variation in dependent variable, while R is correlation between one variable and another</p>
<ul class="simple">
<li><p>With my correlation analysis, use R</p></li>
<li><p>If I use OLS, use R²</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python38564bitbaseconda7d6f1c93fcf44d42a10d5ebc0f2d36ee",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python38564bitbaseconda7d6f1c93fcf44d42a10d5ebc0f2d36ee'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="8_discussions.html" title="previous page">Discussion</a>
    <a class='right-next' id="next-link" href="thesis_analysis.html" title="next page">Water Quality, Perception and Knowledge in China</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Will Rynearson<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>